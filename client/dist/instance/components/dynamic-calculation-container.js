"use strict";var __decorate=this&&this.__decorate||function(e,t,a,n){var c,o=arguments.length,i=3>o?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(c=e[r])&&(i=(3>o?c(i):o>3?c(t,a,i):c(t,a))||i);return o>3&&i&&Object.defineProperty(t,a,i),i},__metadata=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},core_1=require("@angular/core"),common_1=require("@angular/common"),router_deprecated_1=require("@angular/router-deprecated"),calculation_service_1=require("../../calculation/services/calculation-service"),instance_service_1=require("../../calculation/services/instance-service"),latex_component_1=require("../../calculation/components/latex-component"),dynamic_calculation_cmp_1=require("./dynamic-calculation-cmp"),DynamicCalculationContainer=function(){function e(e,t,a,n){this.loader=e,this.viewContainerRef=t,this._params=a,this._instanceService=n}return e.prototype.ngOnInit=function(){this._loadTemplate()},e.prototype._loadTemplate=function(){var e=this;this._instanceService.getTemplate(this.instance.template.templateUrl).subscribe(function(t){e.templateHtml=t;var a=core_1.ReflectiveInjector.resolve([common_1.FORM_PROVIDERS,calculation_service_1.CalculationService]);e.loader.loadNextToLocation(dynamic_calculation_cmp_1["default"](e.templateHtml,e.instance,[common_1.FORM_DIRECTIVES,latex_component_1.LatexComponent]),e.viewContainerRef,a)})},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"instance",void 0),e=__decorate([core_1.Component({selector:"dynamic-calculation-container",template:"<div #container></div>"}),__metadata("design:paramtypes",[core_1.DynamicComponentLoader,core_1.ViewContainerRef,router_deprecated_1.RouteParams,instance_service_1.InstanceService])],e)}();exports.DynamicCalculationContainer=DynamicCalculationContainer;